Test ID,Summary,Description,Action,Expected Result,Classification,Phase,References
EAI-MTA-001,SMTPUTF8 capability is advertised,"When a client connects to the server (with the EHLO command), the listing of capabilities returned by the server must include SMTPUTF8 to indicate EAI support.",Connect to software (using EHLO command) and inspect traffic sent to client,Response to command is 250 and listing includes SMTPUTF8,Required,1,RFC 6531
EAI-MTA-002,8BITMIME capability is advertised,"When a client connects to the server (with the EHLO command), the listing of capabilities returned by the server must include 8BITMIME to indicate the ability to handle 8-bit data.",Connect to software (using EHLO command) and inspect traffic sent to client,Response to command is 250 and listing includes 8BITMIME,Required,1,"RFC 6152, RFC 6531"
EAI-MTA-003,EHLO command argument is transmitted as ASCII,"When the software connects to another SMTP server as a client, it must provide the domain argument to the EHLO command in A-label form.",Transmit message from <Domain> and inspect traffic sent to server,EHLO command includes domain in A-label form,Required,1,RFC 6531
EAI-MTA-004,SMTPUTF8 parameter is provided for EAI messages,"When transmitting an EAI message with the MAIL command to an SMTPUTF8-capable server, the SMTPUTF8 parameter must be included. For this test case, the EAI message should be one that is transmitted with Unicode text in the local part of the originator or destination address header value, since that is not subject to reencoding (for example, by conversion to Punycode).",Transmit EAI message and inspect traffic sent to server,MAIL command includes SMTPUTF8 parameter,Required,1,RFC 6531
EAI-MTA-005,Trace information includes domain in U-label form,"When the software adds a “Received” header to a message transmitted to an SMTPUTF8-capable server indicating the return path of the message, it should encode the domain of the host on which the server is running in U-label form.",Transmit EAI message to SMTP server with SMTPUTF8 support and inspect received message,Received message includes “Received” header with domain in U-label form,Advisory,1,RFC 6531
EAI-MTA-006,Trace information indicates SMTPUTF8 protocol,"When the software adds a “Received” header to a message indicating the protocol used for transfer, which should be one of UTF8SMTP, UTF8SMTPS, UTF8SMTPA, or UTF8SMTPSA. This protocol is placed in the “with” position of the “Received” header value.",Transmit EAI message to SMTP server with SMTPUTF8 support and inspect received message,Received message includes “Received” header indicating EAI protocol,Advisory,1,RFC 6531
EAI-MTA-007,EAI reverse path values are transmitted to SMTPUTF8 server,"Connections to an SMTP server offering the SMTPUTF8 extension may submit envelopes with addresses in either A-label or U-label form. This applies to the reverse-path of the MAIL command. Because the software may use either representation, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the command arguments.",Transmit message with reverse-path <Email> to server with SMTPUTF8 server,Message is transmitted,Required,1,RFC 6531
EAI-MTA-008,EAI forward path values are transmitted to SMTPUTF8 server,"Connections to an SMTP server offering the SMTPUTF8 extension may submit envelopes with addresses in either A-label or U-label form. This applies to the forward-path of the RCPT command. Because the software may use either representation, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the command arguments.",Transmit message with forward-path <Email> to server with SMTPUTF8 support,Message is transmitted,Required,1,RFC 6531
EAI-MTA-009,EAI originator header values are transmitted to SMTPUTF8 server,"Messages transmitted to an SMTP server offering the SMTPUTF8 extension may send mailbox parts in either A-label or U-label form. This applies to the “From” and “Reply-to” fields. Because the software may use either representation, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the message header values.",Transmit message with originator <Email> to SMTP server with SMTPUTF8 support,Message is transmitted,Required,1,"RFC 6530, RFC 6531, RFC 6532"
EAI-MTA-010,EAI destination address header values are transmitted to SMTPUTF8 server,"Messages transmitted to an SMTP server offering the SMTPUTF8 extension may send mailbox parts in either A-label or U-label form. This applies to the “To”, “Cc”, and “Bcc” fields. Because the software may use either representation, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the message header values.",Transmit message with destination address <Email> to SMTP server with SMTPUTF8 support,Message is transmitted,Required,1,"RFC 6530, RFC 6531, RFC 6532"
EAI-MTA-011,Unicode unstructured header values are transmitted to SMTPUTF8 server,"Messages transmitted to an SMTP server offering the SMTPUTF8 extension may send headers containing UTF-8 values, instead of using an alternative encoding for non-ASCII content. The “Subject” header is used as an indicative test case for this behavior. Because the software may still choose to use an alternative encoding, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the message header values.",Transmit message with “Subject” <Unicode> to SMTP server with SMTPUTF8 support ,Message is transmitted,Required,1,"RFC 6530, RFC 6531, RFC 6532"
EAI-MTA-012,SMTPUTF8 parameter is not provided for non-EAI messages,"When transmitting a non-EAI message with the MAIL command to an SMTPUTF8-capable server, the SMTPUTF8 parameter should not be included. For this test case, a non-EAI message is one composed entirely of  ASCII headers and body content.",Transmit non-EAI message and inspect traffic sent to server,MAIL command does not include SMTPUTF8 parameter,Advisory,1,RFC 6531
EAI-MTA-013,EAI messages sent to non-SMTPUTF8 server are rejected,"When transmitting an EAI message to a non-SMTPUTF8-capable server, the message must be rejected. This test case excludes <Email> Use Cases with an ASCII local part, since the domain part of the address may legally be converted to A-label form.",Transmit message with originator <Email> to SMTP server without SMTPUTF8 support,Message is rejected,Required,1,"RFC 6409, RFC 6531"

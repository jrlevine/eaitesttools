Test ID,Summary,Description,Action,Expected Result,Classification,Phase,References
EAI-MSA-001,SMTPUTF8 capability is advertised,"When a client connects to the server (with the EHLO command), the listing of capabilities returned by the server must include SMTPUTF8 to indicate EAI support.",Connect to software (using EHLO command) and inspect traffic sent to client,Response to command is 250 and listing includes SMTPUTF8,Required,1,RFC 6531
EAI-MSA-002,8BITMIME capability is advertised,"When a client connects to the server (with the EHLO command), the listing of capabilities returned by the server must include 8BITMIME to indicate the ability to handle 8-bit data.",Connect to software (using EHLO command) and inspect traffic sent to client,Response to command is 250 and listing includes 8BITMIME,Required,1,"RFC 6152, RFC 6531"
EAI-MSA-003,EHLO command argument is transmitted as ASCII,"When the software connects to another SMTP server as a client, it must provide the domain argument to the EHLO command in A-label form. For this test, the software must be configured to identify itself with all non-ASCII <Domain>.",Submit message and inspect traffic sent to server,EHLO command includes domain in A-label form,Required,1,RFC 6531
EAI-MSA-004,SMTPUTF8 parameter is provided with MAIL command for EAI messages,"When transmitting an EAI message with the MAIL command to an SMTPUTF8-capable server, the SMTPUTF8 parameter must be included. For this test case, the EAI message should be one with Unicode text in the local part of a originator or destination address header value, since that part is not subject to reencoding (for example, by conversion to Punycode). In other words, this test case applies only to <Email> Use Cases with an non-ASCII local part.",Submit EAI message and inspect traffic sent to server,MAIL command includes SMTPUTF8 parameter,Required,1,RFC 6531
EAI-MSA-005,EAI reverse path values are transmitted to SMTPUTF8 server,"Connections to an SMTP server offering the SMTPUTF8 extension may submit envelopes with addresses in either A-label or U-label form. This applies to the reverse-path of the MAIL command. Because the software may use either representation, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the command arguments.",Submit message with reverse-path <Email> to server with SMTPUTF8 server,Message is transmitted,Required,1,RFC 6531
EAI-MSA-006,EAI forward path values are transmitted to SMTPUTF8 server,"Connections to an SMTP server offering the SMTPUTF8 extension may submit envelopes with addresses in either A-label or U-label form. This applies to the forward-path of the RCPT command. Because the software may use either representation, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the command arguments.",Submit message with forward-path <Email> to server with SMTPUTF8 support,Message is transmitted,Required,1,RFC 6531
EAI-MSA-007,EAI originator header values are transmitted to SMTPUTF8 server,"Messages transmitted to an SMTP server offering the SMTPUTF8 extension may send mailbox parts as either A-label or U-label form. This applies to the “From” and “Reply-to” fields. Because the software may use either representation, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the message header values.",Submit message with originator <Email> to server with SMTPUTF8 support,Message is transmitted,Required,1,"RFC 6530, RFC 6531, RFC 6532"
EAI-MSA-008,EAI destination address header values are transmitted to SMTPUTF8 server,"Messages transmitted to an SMTP server offering the SMTPUTF8 extension may send mailbox parts as either A-label or U-label form. This applies to the “To”, “Cc”, and “Bcc” fields. Because the software may use either representation, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the message header values.",Submit message with destination address <Email> to server with SMTPUTF8 support,Message is transmitted,Required,1,"RFC 6530, RFC 6531, RFC 6532"
EAI-MSA-009,Unicode unstructured header values are transmitted to SMTPUTF8 server,"Messages transmitted to an SMTP server offering the SMTPUTF8 extension may send headers containing UTF-8 values, instead of using an alternative encoding for non-ASCII content. The “Subject” header is used as an indicative test case for this behavior. Because the software may still choose to use an alternative encoding, this test simply verifies that it will correctly transmit messages to an SMTPUTF8-capable server, but does not test the specific representation used for the message header values.",Submit message with “Subject” <Unicode> to server with SMTPUTF8 support,Message is transmitted,Required,1,"RFC 6530, RFC 6531, RFC 6532"
EAI-MSA-010,SMTPUTF8 parameter is not provided for non-EAI messages,"When transmitting a non-EAI message with the MAIL command to an SMTPUTF8-capable server, the SMTPUTF8 parameter should not be included. For this test case, a non-EAI message is one composed entirely of  ASCII headers and body content.",Submit non-EAI message and inspect traffic sent to server,MAIL command does not include SMTPUTF8 parameter,Advisory,1,RFC 6531
EAI-MSA-011,EAI messages sent to non-SMTPUTF8 server are rejected or transformed,"When transmitting an EAI message to a non-SMTPUTF8-capable server, the message must either be rejected or transformed into a non-EAI form. Because the software can choose either of these two options and there are many possibilities for transformation, this test case just ensures that the software does not submit EAI mail to a non-SMTPUTF8-capable channel in a way that requires SMTPUTF8 features.",Submit message with originator <Email> to server without SMTPUTF8 support,Message is rejected or submitted after transformation,Required,1,"RFC 6409, RFC 6531"
EAI-MSA-012,EAI reverse path values are transmitted to non-SMTPUTF8 server as ASCII,"If the software transforms EAI messages for transmission to non-EAI servers (rather than rejecting them), envelopes submitted to an SMTP server that does not offer the SMTPUTF8 extension should encode EAI addresses in message envelopes in A-label form. This applies to reverse-path of the MAIL command. This test case excludes <Email> Use Cases with a non-ASCII local part.",Submit message with reverse-path <Email> to server without SMTPUTF8 support,Message is transmitted with <Email> domain part in A-label form,Required,1,"RFC 6530, RFC 6531"
EAI-MSA-013,EAI forward path values are transmitted to non-SMTPUTF8 server as ASCII,"If the software transforms EAI messages for transmission to non-EAI servers (rather than rejecting them), envelopes submitted to an SMTP server that does not offer the SMTPUTF8 extension should encode EAI addresses in message envelopes in A-label form. This applies to forward-path of the RCPT command. This test case excludes <Email> Use Cases with a non-ASCII local part.",Submit message with forward-path <Email> to server without SMTPUTF8 support,Message is transmitted with <Email> domain part in A-label form,Required,1,"RFC 6530, RFC 6531"
EAI-MSA-014,EAI originator header values are transmitted to non-SMTPUTF8 server as ASCII,"If the software transforms EAI messages for transmission to non-EAI servers (rather than rejecting them), messages transmitted to an SMTP server that does not offer the SMTPUTF8 extension should encode EAI addresses in originator headers in A-label form. This applies to the “From” and “Reply-to” fields. This test case excludes <Email> Use Cases with a non-ASCII local part.",Submit message with originator <Email> to server without SMTPUTF8 support,Message is transmitted with <Email> domain part in A-label form,Required,1,"RFC 6530, RFC 6531"
EAI-MSA-015,EAI destination address header values are transmitted to non-SMTPUTF8 server as ASCII,"If the software transforms EAI messages for transmission to non-EAI servers (rather than rejecting them), messages transmitted to an SMTP server that does not offer the SMTPUTF8 extension should encode EAI addresses in destination address headers in A-label form. This applies to the “To”, “Cc” and “Bcc” headers. This test case excludes <Email> Use Cases with a non-ASCII local part.",Submit message with destination address <Email> to server without SMTPUTF8 support,Message is transmitted with <Email> domain part in A-label form,Required,1,"RFC 6530, RFC 6531"
EAI-MSA-016,Unicode unstructured header values are transmitted to non-SMTPUTF8 server as ASCII,"If the software transforms EAI messages for transmission to non-EAI servers (rather than rejecting them), messages transmitted to an SMTP server that does not offer the SMTPUTF8 extension should encode unstructured header values containing UTF-8 values using an ASCII representation (for example, using quoted-words). The “Subject” header is used as an indicative test case for this behavior.",Submit message with “Subject” <Unicode> to server without SMTPUTF8 support,Message is transmitted with <Unicode> value encoded as ASCII in “Subject” header,Required,1,"RFC 6530, RFC 6531"
EAI-MSA-017,Message-ID of EAI message transmitted to non-SMTPUTF8 server is ASCII-only,"If the software transforms EAI messages for transmission to non-EAI servers (rather than rejecting them) and assigns Message-ID header values to the messages it transmits, messages transmitted to an SMTP server that does not offer the SMTPUTF8 extension should be assigned ASCII-only Message-ID values (or the application should encode Message-ID values containing UTF-8 using an ASCII representation). Because it is common for Message-ID generation algorithms to include the domain part of the originator’s address of Message-Ids, this test case should send a message “From” an EAI address.",Submit message with “From” <Email> to server without SMTPUTF8 support,Message is transmitted with ASCII Message-ID header value,Required,1,"RFC 6531, RFC 6532"
